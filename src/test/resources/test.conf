input {
    loghub.receivers.ZMQ {
        listen: "tcp://localhost:2120",
        decoder: loghub.decoders.Log4j
    }
} | $main
output $oneref | { loghub.senders.ElasticSearch }

pipeline[oneref] { loghub.processors.Geoip { datfilepath:"/user/local/share/GeoIP/GeoIP.dat", locationfield:"localtion", threads:4 } }
pipeline[main] {
     loghub.processors.Log { threads: 2 } 
    | event.logger_name == "jrds.starter.Timer" || event.info > 4 ? loghub.processors.Log : ( loghub.processors.Identity | loghub.processors.Identity) 
    | $oneref
    | loghub.processors.Drop
}
pipeline [groovy] { loghub.processors.Groovy { script: "println event['logger_name']" } }
logfile: "machin"
extensions: "/b:/c"
